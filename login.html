<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>TI Login</title>
    <script src="https://www.gstatic.com/firebasejs/3.6.4/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAPGboQdrh1wMjLi6cxhPF53NNuCdbRgBY",
    authDomain: "taylored-instruction.firebaseapp.com",
    databaseURL: "https://taylored-instruction.firebaseio.com",
    storageBucket: "taylored-instruction.appspot.com",
    messagingSenderId: "1091342339175"
  };
  firebase.initializeApp(config);
</script>
    <script src="https://cdn.firebase.com/libs/firebaseui/1.0.0/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/1.0.0/firebaseui.css" />
    <script type="text/javascript">
      
      firebase.auth().onAuthStateChanged(function(user) {
        var user = firebase.auth().currentUser;
  if (!(user)===null) {
    window.location.href = 'https://tayloredinstruction.github.io/add_delete_trip.html'
  } else {
    // No user is signed in.
  }
});
      
     function facebooklogin(){
       
     }
      
      
      function googlelogin(){
        var provider = new firebase.auth.GoogleAuthProvider();
        firebase.auth().signInWithRedirect(provider);
        firebase.auth().getRedirectResult().then(function(result) {
           if (result.credential) {
            // This gives you a Google Access Token. You can use it to access the Google API.
           var token = result.credential.accessToken;
            // ...
          }
        // The signed-in user info.
        var user = result.user;
        }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
       var errorMessage = error.message;
       // The email of the user's account used.
       var email = error.email;
       // The firebase.auth.AuthCredential type that was used.
        var credential = error.credential;
       // ...
      });
    }
      
      
      function emailpasslogin(){
       var email = document.getElementById("lusername").value
       var password = document.getElementById("lpassword").value
        firebaseref.authWithPassword({
                    email: email,
                    password: password,
                });
      }
      
     function register(){
       var email = document.getElementById("susername").value
       var password = document.getElementById("spassword").value
        firebaseref.createUser({
            email: email,
            password: password
        }),

        function(error, userData) {
            if (error) {
                console.log("Error creating user:", error);
                alert("Error creating user:" + error)
            } else {
                firebaseref.authWithPassword({
                    email: email,
                    password: password,
                });

            }
        }
                               }
    </script>
  </head>
  <body>
    <!-- The surrounding HTML is left untouched by FirebaseUI.
         Your app may use that space for branding, controls and other customizations.-->
    <h1>Choose your Login Method</h1>
    <div id = "login">
      <button type="button" onclick="facebooklogin()">Facebook</button><br>
      <button type="button" onclick="googlelogin()">Google</button><br>
      <button type="button" onclick="emailpasslogin()">Email</button><br>
      <button type="button" onclick="signup()">Signup</button>
      <input type="text" id = "lusername">
      <input type="text" id = "lpassword">
      <button type="button" onclick="register()">Login</button>
    </div>
    <div id = "signup">
      <input type="text" id = "susername">
      <input type="text" id = "spassword">
      <button type="button" onclick="register()">Submit</button>
    </div>
    
  </body>
</html>
